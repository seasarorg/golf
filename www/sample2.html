<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja"><head><!-- don't edit start --><title>Golf-Example2</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><link href="s2click.css" type="text/css" rel="stylesheet" media="screen" /><link href="seasar_b.css" type="text/css" rel="stylesheet" media="screen" /><link href="seasar_p.css" type="text/css" rel="stylesheet" media="print" /><script src="seasar_b.js" type="text/JavaScript" language="JavaScript">
</script><style type="text/css">
<!--
.style1 {color: #FF0000}
pre { background-color: #e7ebff; color: #000000; width:100px}
.synSpecial { color: #c000c0; }
.synType { color: #008000; }
.synComment { color: #0000c0; }
.synPreProc { color: #c000c0; }
.synIdentifier { color: #008080; }
.synConstant { color: #c00000; }
.synStatement { color: #804000; }
.style2 {color: #0000FF}
-->
</style>
</head>
<body style="direction: ltr;" onload="preload('ja')"><table align="left" border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td align="left" valign="top" width="780"><table class="white" border="0" cellpadding="0" cellspacing="0" width="857">
<tbody><tr><td colspan="7"><img src="images/top01_b.gif" alt="" height="5" width="780" /></td></tr><tr><td width="235"><img src="images/top02_b.gif" alt="Seasar" height="117" width="235" /></td><td colspan="3"><img src="images/top03.gif" alt="DI Container with AOP" height="117" width="289" /></td><td colspan="3"><img src="images/spacer.gif" alt="" height="117" width="324" /></td>
</tr><tr><td rowspan="2"><img src="images/top04.gif" alt="" height="49" width="235" /></td><td width="78"><a href="http://www.seasar.org/index.html"><img src="images/menu01_b_ja.gif" alt="" id="menu01" onmouseover="swap(1)" onmouseout="restore(1)" name="menu01" border="0" height="30" width="78" /></a></td><td width="101"><a href="http://www.seasar.org/projects.html"><img src="images/menu02_b_ja.gif" alt="" id="menu02" onmouseover="swap(2)" onmouseout="restore(2)" name="menu02" border="0" height="30" width="101" /></a></td><td width="110"><a href="http://www.seasar.org/products.html"><img src="images/menu03_b_ja.gif" alt="" id="menu03" onmouseover="swap(3)" onmouseout="restore(3)" name="menu03" border="0" height="30" width="110" /></a></td><td width="113"><a href="http://www.seasar.org/resources.html"><img src="images/menu04_b_ja.gif" alt="" id="menu04" onmouseover="swap(4)" onmouseout="restore(4)" name="menu04" border="0" height="30" width="113" /></a></td><td width="109"><img src="images/menu05_b_ja.gif" alt="" id="menu05" onmouseover="swap(5)" onmouseout="restore(5)" name="menu05" border="0" height="30" width="109" /></td><td width="111"><img src="images/menu06.gif" alt="" height="30" width="34" /></td>
</tr><tr><td colspan="6"><img src="images/spacer.gif" alt="" height="19" width="545" /></td></tr></tbody></table><table class="white" border="0" cellpadding="0" cellspacing="0" width="780">
  <tbody><tr align="left" valign="top"><td width="14"><img src="images/spacer.gif" alt="" height="14" width="14" /></td><td class="main" width="740"><!-- don't edit end --><!-- document start -->
<dl>
<dd>&nbsp;</dd>

<h3><a name="document" id="document">Example ２
</a></h3>
</dl>

<dl>
<dd>それでは、Example ２を見てみましょう。Launcher画面のExample ２を押すと下記画面が表示されます。
<br><br></dd></dl>
<img src="images/example2-1.jpeg" width="688" height="319" /></dd>

<dl><dd>
この画面の想定は、Item Noが自動的に１０番毎に振られており、ユーザーはこれを変更する事により、
<br>表示順を制御できます。 
<br>idは、Databaseで自動的にふられますので、本来はユーザーに見せる必要はありません。
<br>それでは、Stock No欄に「１１」と入力して、TAB　キーか、次のFieldをクリックして、入力を終了
<br>させて下さい。すぐに下記の様に、エラー表示がされます。このFieldも「min3max6string」
<br>すなわち、文字列の３桁～６桁が有効かチェックするValidatorがSetされていますので、２桁ではエラーとなります。
<br><br></dd></dl><img src="images/example2-2.jpeg" width="695" height="319" />
<br><dl><dd>
<br>それでは、Stock No欄を「１１１１」と入力して、エラーを回避して、つぎにDate欄に
<br>「07/1/20」と入れて見ましょう。「2007/01/20」と表示が変わります。これはこの欄に
<br>「longDateValidator」（YYYY/MM/DD）がSetされているからです。
<br><br></dd></dl><img src="images/example2-3.jpeg" width="721" />
<br>
<dl><dd>
それでは、ここで「このボタンを押すと・・・・」のボタンを押してみましょう。
<br>Example １と同様、必須 Checkが掛かります。
<br><br></dd></dl><img src="images/example2-4.jpeg" width="694" />
<br><dl><dd>
これは、Qty欄がRequired項目　（ItemNo,StockNO,DateもRequired項目です）と定義されているからです。
<br>尚、２行目から５行目には、ItemNoがSetされていますが、エラーとなっていません。
<br>これは、ItemNo,StockNO,Qty,Dateのどれか一つでも入力されている行を有効な行とみなす設定がされて
<br>いるからです。
<br>また、id欄やName欄は入力出来ない設定になっています。
<br>ここまでの、設定はすべて下記のCSV Fileにて、定義されています。
<br><br></dd></dl><img src="images/example2-c.jpeg" />
<br><dl><dd>FieldがColumn名、Classが Field属性（golf.properties Fileで、実際のClass名に変換しています）、
<br>CanEditで、編集可能属性の定義、InsCheckで有効行の判定項目の指定、Validatorの指定、
<br>DisplayNameでエラー表示時の表示名の設定、Requiredで必須項目の設定を行います。

<br>それでは、一番下の行のStockNoをクリックして、入力モードにして下さい。
<br><br></dd></dl><img src="images/example2-5.jpeg" width="693" />
<br><dl><dd>
00060行が自動的に追加されましたね。最下行をクリックするか、入力すると自動的に次の行が
<br>追加される様にしています。（勿論 表示のみの場合はこの機能をDisableする事は簡単です）
<br>またItemNo欄は、既に表示されているItemNOの最大値に増分値を加える様になっています。
<br>これを変更して、Item Noを１づつ増加させたり、または空行を追加するのも簡単に行えます。
<br>
それでは、Programを見てみましょう。
（Matisseで自動作成分を除く）
</dd>
</dl>
<pre>
<span class="synType">public</span> <span class="synType">class</span> Example2Frame <span class="synType">extends</span> javax.swing.JFrame  <span class="synType">implements</span> GolfFormInterface {
    <span class="style1">private FormManager formManager = null;
    private GolfTableModel golfTableModel= new GolfTableModel();</span>
    
   <span class="synType">public</span> <span class="synType">void</span> initBinding(HashMap params) {
<span class="style1">        formManager = new FormManager(this);
        formManager.init();
        formManager.createReportList(jScrollPane1);
        jTable1.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        formManager.setTableColumnFromCsvResource(
    			jTable1, &quot;Test Table&quot;, golfTableModel, &quot;Example2_table1.csv&quot;);
        for (int i=0; i &lt; 5; i++) {
            addNewRow();
        }
        TableUtil.SetPreferedColumnWIdth(jTable1, new</span> <span class="style1">int[]{15,40,60,150,40,80 });</span>
      }

    <span class="synType">private</span> <span class="synType">void</span> jTable1MouseClicked(java.awt.event.MouseEvent evt) {                                     
        <span class="style1">addNewRowWhenCursorLastRow(); </span>   
    }                                    

    <span class="synType">private</span> <span class="synType">void</span> jTable1KeyPressed(java.awt.event.KeyEvent evt) {                                   
<span class="style1">        if (TableUtil.checkRowDownEvent(evt)) {
            addNewRowWhenCursorLastRow();            
        }</span>
    }                                  

    <span class="synType">private</span> <span class="synType">void</span> jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        <span class="style1">formManager.getFormValidationManager().Validate(true);</span>
    }                                        
<span class="style2">    public FormManager getFormManager() {</span>
        <span class="style1">return formManager;</span>
 <span class="style2">   }</span>

    <span class="style2">public JMenuBar getMenu() {</span>
        <span class="style1">return</span> <span class="style1">null;</span>
<span class="style2">    }</span>

    <span class="style2">public JPanel getContentPanel() {</span>
       <span class="style1">return</span> <span class="style1">null;</span>
  <span class="style2">  }</span>


    <span class="synType style1">private</span> <span class="synType style1">void</span><span class="style1"> addNewRow() {
             TableUtil.addNewRowWithItemNo (golfTableModel,1,10,5);
    }
                                  

    private</span> <span class="synType style1">void</span><span class="style1"> addNewRowWhenCursorLastRow() {
        if (jTable1.getSelectedRow() == jTable1.getRowCount() -1) {
            addNewRow();
        }
    }</span>

    <span class="style2">public</span> <span class="style2">void processAction(HashMap params) {
    }</span>
    <span class="style2">public</span> <span class="style2">void setFormManger(FormManager formManager) {</span>
        <span class="style1">this.formManager = formManager;</span>
<span class="style2">    }</span>
}

</pre>
</dl>
<dl>
<dd>Example １と同様「赤」の部分のみが、手で入力しなければならない項目で、大変すくなくなっています。<br>
また「青」の部分は、GolfInterfaceをImplementsすれば、Netbeansが自動的に作成します。<br>
なお、FormのControl,Validation、Bindingで使う Classの関係は以下の通りとなっています。（参照を保有）
<br><br></dd></dl><img src="images/example2-6.jpeg" />
<br><br><dl><dd>また、JTableのModelとしては、GolfTableModelを使用する事により、BindingとValidationの機能が
<br>使用できます。
<br>それでは、次のExampleで、TableとFieldの連動機能を見てみましょう。
</dd>
</dl>

<h3><a name="link" id="link">リンク</a></h3>
<dl>
  <dd><a href="sample3.html">Example ３へのリンク</a></dd>
</dl> 
<dl>
  <dd><a href="index.html">GOLF HOMEへのリンク</a></dd>
</dl>
<!-- document end -->
<!-- don't edit start --></td><td><img src="images/spacer.gif" alt="" height="14" width="14" /></td></tr><tr><td width="14"><img src="images/spacer.gif" alt="" height="30" width="14" /></td><td width="766"><img src="images/spacer.gif" alt="" height="30" width="592" /></td></tr><tr><td width="14"><img src="images/spacer.gif" alt="" height="14" width="14" /></td><td class="copyright" width="766">Copyright&copy;
2004-2005, The Seasar Foundation and the others. All rights reserved.</td>
</tr></tbody></table></td><td class="backright" align="left" valign="top">&nbsp;</td>
</tr><tr><td class="backunder" align="left" height="16" valign="top" width="780">&nbsp;</td>
<td class="backcorner" align="left" height="16" valign="top">&nbsp;</td>
</tr></tbody></table><!-- don't edit end --></body></html>